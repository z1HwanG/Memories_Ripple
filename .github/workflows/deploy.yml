name: Deploy Hugo Site  # 工作流的名称，显示在GitHub Actions界面上

on:  # 触发工作流的条件
  push:  # 当有代码推送时
    branches:
      - main  # 仅当推送到main分支时触发

jobs:  # 工作流中的作业
  deploy:  # 作业名称
    runs-on: huawei  # 运行环境：最新版Ubuntu
    steps:  # 作业中的步骤
      - name: Deploy to Server  # 步骤名称：部署到服务器
        uses: appleboy/scp-action@master  # 使用SCP action进行文件传输
        with:  # 参数配置
          source: "public/"  # 要传输的源文件/目录
          target: ${{ secrets.SERVER_DEPLOY_PATH }}  # 目标路径，从GitHub密钥中获取
          strip_components: 1  # 剥离目录层级，即只复制public/内的内容，而非整个public目录
